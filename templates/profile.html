{% include "_header.html" %}
{% include "_nav.html" %}

<main id="profile">
  <h1>Profile</h1>

  <h2>Personal info</h2>
  <ul>
    <li><strong>Username:</strong> {{ user.user_username }}</li>
    <li><strong>Name:</strong> {{ user.user_name }} {{ user.user_last_name }}</li>
    <li><strong>Email:</strong> {{ user.user_email }}</li>
    <li><strong>Member since:</strong> {{ user.user_created_at }}</li>
  </ul>

  <p>
    <a href="{{ url_for('edit_profile') }}">Edit profile</a> |
    <a href="{{ url_for('delete_profile') }}">Delete profile</a>
  </p>

  <!-- Fejlbeskeder eller succes -->
  <div id="form-errors">
    {% if errors %}
      <ul class="error-list">
        {% for field, message in errors.items() %}
          <li>{{ message }}</li>
        {% endfor %}
      </ul>
    {% endif %}
    {% if success %}
      <p class="success-msg">{{ success }}</p>
    {% endif %}
  </div>

  <h2>Upload a spot</h2>
  <!-- Upload-formular -->
  {% include "upload_item_form.html" %}
<div id="form-feedback"></div>


  <section id="items">
      <h2>Your spots</h2>
      {% if message %}
      <div class="alert success" mix-ttl="3000">{{ message }}</div>
      {% endif %}
          {% for item in items %}
      <div class="item-card" id="x{{ item.item_pk }}">
        <h3>{{ item.item_name }}</h3>
        <p><strong>Price:</strong> {{ item.item_price }} DKK</p>
        <p><strong>Address:</strong> {{ item.item_address }}</p>
        <p>{{ item.item_description }}</p>
        <a href="/items/{{ item.item_pk }}/edit">Edit spot</a>
        <button mix-delete="/items/{{ item.item_pk }}">Delete item</button>

        <!-- imgs -->
        <div class="item-images">
          {% for img in item.images %}
            <div id="x{{ img.image_pk }}">
              <img class="uploaded_imgs_profile" src="/static/uploads/{{ img.image_name }}" alt="{{ img.image_name }}">
              <button mix-delete="/images/{{ img.image_pk }}">Delete image</button>
            </div>
          {% endfor %}
        </div>
      </div>
    {% endfor %}
  </section>
</main>

{% include "_footer_base.html" %}